//done
exports.up = function(knex, Promise) {
return knex.schema.createTable('shops', function(table) {
table.increments('shopId').primary();
table.integer('shopSeller_id').unsigned().index().references('sellerId').inTable('sellers');
table.string('shopName');
table.text('shopAbout');
table.string('shopCell');
table.string('shopEmail');
table.integer('shopStripe_id').unsigned().index().references('stripeId').inTable('stripes').onDelete('cascade');
table.integer('shopBitCoin_id').unsigned().index().references('bitCoinId').inTable('bitcoins').onDelete('cascade');
table.string('shopPaypalMerchId');
table.string('shopImgUrl');
table.string('shopPrivacy');
table.string('shopReturn');
table.timestamp('shopSince').defaultTo(knex.fn.now());
});
};

exports.down = function(knex, Promise) {
return knex.schema.dropTable('shops')
};




//done
exports.up = function(knex, Promise) {
  return knex.schema.createTable('sellers', function(table) {
    table.increments('sellerId').primary();
    table.string('sellerFirstName');
    table.string('sellerLastName');
    table.string('sellerCell');
    table.string('sellerImgUrl');
    table.text('sellerAbout');
    table.timestamp('sellerSince').defaultTo(knex.fn.now());
  });
};

exports.down = function(knex, Promise) {
  return knex.schema.dropTable('sellers')
};





//done
exports.up = function(knex, Promise) {
  return knex.schema.createTable('prods', function(table) {
    table.increments('prodId').primary();
    table.string('prodName');
    table.integer('prodShop_id').unsigned().index().references('shopId').inTable('shops');
    table.string('prodImgUrl');
    //REMOVEtable.integer('prodImgGal_id');REMOVE
    table.text('prodAbout');
    table.decimal('prodPrice',8,2);
    table.decimal('prodShipAmt',8,2);
    table.timestamp('prodSince').defaultTo(knex.fn.now());
  });
};

//fixPRODS
exports.up = function(knex, Promise) {
  return knex.schema.table('prods', function(table) {
    table.renameColumn('prodStore_id', 'prodShop_id');
    table.integer('prodShipDays');
  });
};

exports.down = function(knex, Promise) {
  return knex.schema.dropTable('prods')
};




//done
exports.up = function(knex, Promise) {
  return knex.schema.createTable('tags', function(table) {
    table.increments('tagId').primary();
    table.string('tagKeyword');
    table.timestamp('tagSince').defaultTo(knex.fn.now());
  });
};

exports.down = function(knex, Promise) {
  return knex.schema.dropTable('tags')
};





//done
exports.up = function(knex, Promise) {
  return knex.schema.createTable('prods_tags', function(table) {
    table.increments('prod_tagId').primary();
    table.integer('prod_tagProds_id').unsigned().index().references('prodId').inTable('prods');
    table.integer('prod_tagTags_id').unsigned().index().references('tagId').inTable('tags');
  });
};

exports.down = function(knex, Promise) {
  return knex.schema.dropTable('prods_tags')
};




//not done, complete buyer ref
exports.up = function(knex, Promise) {
  return knex.schema.createTable('trans', function(table) {
    table.increments('tranId').primary();
    table.integer('tranShop_id').unsigned().index().references('shopId').inTable('shops');
    table.integer('tranBuyer_id').unsigned().index().references('buyerId').inTable('buyers');
    table.integer('tranProd_id').unsigned().index().references('prodId').inTable('prods');
    table.enu('tranMethodPay', ['Paypal', 'Stripe', 'Bitcoin']);
    table.integer('tranMethodTranId');
    table.decimal('tranAmt',8,2);
    table.integer('tranShipCharge');
    table.integer('tranShipDays');
    table.timestamp('tranDate').defaultTo(knex.fn.now());
  });
};

exports.down = function(knex, Promise) {
  return knex.schema.dropTable('trans')
};
